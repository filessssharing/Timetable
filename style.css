*{box-sizing:border-box}
:root{--grid-border:#c9ced6;--head-bg:#eef2f7;--break-bg:#f6f7f9;--accent:#0b5cff}
body{font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,Helvetica,sans-serif;margin:24px;color:#0b1220;background:#fafbfc}
header h1{margin:0 0 12px 0;font-weight:700;font-size:clamp(18px,2.4vw,28px)}
.controls{display:flex;gap:12px;align-items:center;margin-bottom:16px;flex-wrap:wrap}
.controls .spacer{flex:1}
.controls select{padding:6px 10px;border:1px solid var(--grid-border);border-radius:8px;background:white}
.controls button,input[type=file]{padding:6px 10px;border:1px solid var(--grid-border);border-radius:8px;background:white}
.dates{opacity:.7;font-size:.95rem}
table{width:100%;border-collapse:collapse;background:white;border:1px solid var(--grid-border);box-shadow:0 6px 18px rgba(10,20,40,.04);border-radius:12px;overflow:hidden}
th,td{border:1px solid var(--grid-border);padding:10px;vertical-align:top;text-align:left}
th{background:var(--head-bg);font-weight:600;text-align:center}
th .date{font-weight:500;opacity:.8;font-size:.85rem;margin-top:4px}
td .title{font-weight:600;display:block}
td .meta{opacity:.85;font-size:.9rem}
.time-col{width:120px;text-align:center}
.slot{background:var(--break-bg);font-weight:600;text-align:center;white-space:nowrap}
.break td{background:var(--break-bg);text-align:center;font-weight:600}
footer{margin-top:12px;opacity:.7}
.badge{display:inline-block;padding:2px 8px;border-radius:999px;border:1px solid var(--grid-border);font-size:.8rem;margin-top:6px}


/* Ensure merged & split timetable cells display correctly */
td {
  vertical-align: top;
}

td[style*="display: flex"] {
  align-items: stretch;
}

td[style*="display: flex"] > div {
  height: 100%;
  box-sizing: border-box;
}


/* === Timetable merge+split visuals (patched) === */
:root { --slot-h: 88px; }

table { table-layout: fixed; }

/* Uniform row height for all time slots (sum when merged) */
tbody tr.slot-row > td { height: var(--slot-h); }

/* Cells with events remove padding; inner containers handle it */
td.has-event { padding: 0; }

/* Single event fills entire cell area */
.tcell-fill {
  height: 100%;
  width: 100%;
  padding: 10px;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: flex-start;
  color: #fff;
}

/* Vertically split cell */
td.split { padding: 0; }
.split-wrap {
  display: flex;
  width: 100%;
  height: 100%;
}
.split-wrap .col {
  flex: 1 1 0;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: flex-start;
  padding: 10px;
  color: #fff;
  border-right: 1px solid var(--grid-border);
  min-width: 0; /* prevent overflow */
}
.split-wrap .col:last-child { border-right: 0; }

/* Typography inside colored fills */
.tcell-fill .title,
.split-wrap .col .title { font-weight: 700; }
.tcell-fill .meta,
.split-wrap .col .meta { opacity: .9; font-size: .9rem; }

/* Ensure merged & split timetable cells display correctly */
td { vertical-align: top; }
